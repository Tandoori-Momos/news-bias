{"version":3,"sources":["../../src/tasks/getOutletID.js"],"names":["getOutletID","outletName","resolve","reject","process","env","NEWS_API_KEY","err","response","body","statusCode","JSON","parse","sources","filter","source","name","length","id"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEA,IAAMA;AAAA,wFAAc,kBAAeC,UAAf;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,0DACT;AAAA,iHAAY,iBAAMC,OAAN,EAAeC,MAAf;AAAA;AAAA;AAAA;AAAA;AACf;AACA,kHAAiDC,QAAQC,GAAR,CAAYC,YAA7D,EACA,UAASC,GAAT,EAAcC,QAAd,EAAwBC,IAAxB,EAA8B;AAC1B,wDAAIF,GAAJ,EAAS;AACLJ,+DAAOI,GAAP;AACH;AACD,wDAAGC,SAASE,UAAT,KAAwB,GAA3B,EAAgC;AAC5BD,+DAAOE,KAAKC,KAAL,CAAWH,IAAX,CAAP;AACA,4DAAII,UAAUJ,KAAKI,OAAnB;AACAA,kEAAUA,QAAQC,MAAR,CAAe,UAASC,MAAT,EAAiB;AACtC,gEAAGA,OAAOC,IAAP,KAAgBf,UAAnB,EAA+B;AAC3B,uEAAOc,MAAP;AACH;AACJ,yDAJS,CAAV;AAKA,4DAAGF,QAAQI,MAAR,IAAkB,QAAQJ,QAAQ,CAAR,CAA7B,EAAyC;AACrCX,oEAAQW,QAAQ,CAAR,EAAWK,EAAnB;AACH,yDAFD,MAEO;AACHf,mEAAO,qBAAP;AACH;AACJ,qDAbD,MAaO;AACHA,+FAAqCK,SAASE,UAA9C;AACH;AACJ,iDArBD;;AAFe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAZ;;AAAA;AAAA;AAAA;AAAA,4BADS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAd;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBA4BeV,W","file":"getOutletID.js","sourcesContent":["import request from 'request';\r\nimport { JaroWinklerDistance } from 'natural';\r\n\r\nconst getOutletID = async function(outletName) {\r\n    return new Promise(async(resolve, reject) => {\r\n        // Make the request to News API\r\n        request(`https://newsapi.org/v2/sources?apiKey=${process.env.NEWS_API_KEY}`, \r\n        function(err, response, body) {\r\n            if (err) {\r\n                reject(err);\r\n            }\r\n            if(response.statusCode === 200) {\r\n                body = JSON.parse(body);\r\n                let sources = body.sources;\r\n                sources = sources.filter(function(source) {\r\n                    if(source.name === outletName) {\r\n                        return source;\r\n                    }\r\n                });\r\n                if(sources.length && 'id' in sources[0]) {\r\n                    resolve(sources[0].id);\r\n                } else {\r\n                    reject('No sources matched.')\r\n                }\r\n            } else {\r\n                reject(`HTTP Request failure: Code ${response.statusCode}`);\r\n            }\r\n        }) \r\n    })\r\n}\r\n\r\nexport default getOutletID;"]}